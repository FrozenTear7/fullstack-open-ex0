(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{18:function(e,n,t){e.exports=t(41)},40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var a=t(0),c=t.n(a),o=t(16),r=t.n(o),u=t(17),i=t(5),l=t(2),s=function(e){var n=e.person,t=e.personDeleteOnClick;return c.a.createElement("div",null,n.name," ",n.number,c.a.createElement("button",{type:"button",onClick:function(){return t(n)}},"delete"))},m=function(e){var n=e.persons,t=e.filterName,a=e.personDeleteOnClick;return c.a.createElement("div",null,n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return c.a.createElement(s,{key:e.id,person:e,personDeleteOnClick:a})})))},f=function(e){var n=e.filterName,t=e.filterOnChange;return c.a.createElement("div",null,"filter shown with:",c.a.createElement("input",{value:n,onChange:t}))},d=function(e){var n=e.newName,t=e.newNumber,a=e.personOnSubmit,o=e.nameOnChange,r=e.numberOnChange;return c.a.createElement("form",{onSubmit:a},c.a.createElement("div",null,"name:",c.a.createElement("input",{value:n,onChange:o})),c.a.createElement("div",null,"number:",c.a.createElement("input",{value:t,onChange:r})),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"add")))},b=t(4),p=t.n(b),v="/api/persons",h=function(){return p.a.get(v)},g=function(e){return p.a.post(v,e)},O=function(e){return p.a.put("".concat(v,"/").concat(e.id),e)},E=function(e){return p.a.delete("".concat(v,"/").concat(e))},C=function(e){var n=e.errorMessage;return n&&n.message?c.a.createElement("div",{className:"notification ".concat(n.isPositive?"success":"error")},n.message):null},j=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],o=n[1],r=Object(a.useState)(""),s=Object(l.a)(r,2),b=s[0],p=s[1],v=Object(a.useState)(""),j=Object(l.a)(v,2),w=j[0],k=j[1],S=Object(a.useState)(""),N=Object(l.a)(S,2),P=N[0],y=N[1],D=Object(a.useState)(null),J=Object(l.a)(D,2),L=J[0],M=J[1],x=function(e){M(e),setTimeout((function(){M(null)}),5e3)};Object(a.useEffect)((function(){h().then((function(e){o(e.data)})).catch((function(e){x({message:"Could not fetch persons",isPositive:!1}),console.log("Could not fetch persons",e)}))}),[]);return c.a.createElement("div",null,c.a.createElement("h1",null,"Phonebook"),c.a.createElement(C,{errorMessage:L}),c.a.createElement(f,{filterName:P,filterOnChange:function(e){y(e.target.value)}}),c.a.createElement("h2",null,"Add a new person"),c.a.createElement(d,{newName:b,newNumber:w,personOnSubmit:function(e){e.preventDefault();var n=t.find((function(e){return e.name===b}));n?O(Object(i.a)(Object(i.a)({},n),{},{number:w})).then((function(){o(t.map((function(e){return e.id===n.id?Object(i.a)(Object(i.a)({},e),{},{number:w}):e}))),x({message:"Successfully updated ".concat(b,"'s number"),isPositive:!0}),p(""),k("")})).catch((function(e){e=e.response.data.error,x({message:"Could not update ".concat(b,"'s number, ").concat(e),isPositive:!1}),console.log("Could not update ".concat(b,"'s number, ").concat(e))})):g({name:b,number:w}).then((function(e){o([].concat(Object(u.a)(t),[e.data])),x({message:"Successfully create ".concat(b,"'s number"),isPositive:!0}),p(""),k("")})).catch((function(e){e=e.response.data.error,x({message:"Could not add ".concat(b,", ").concat(e),isPositive:!1}),console.log("Could not add ".concat(b,", ").concat(e))}))},nameOnChange:function(e){p(e.target.value)},numberOnChange:function(e){k(e.target.value)}}),c.a.createElement("h2",null,"Numbers"),c.a.createElement(m,{persons:t,filterName:P,personDeleteOnClick:function(e){window.confirm("Delete ".concat(e.name))&&E(e.id).then((function(){o(t.filter((function(n){return n.id!==e.id}))),x({message:"Successfully deleted ".concat(e.name),isPositive:!0})})).catch((function(n){x({message:"Could not delete ".concat(e.name),isPositive:!1}),console.log("Could not delete ".concat(e.name),n)}))}}))};t(40);r.a.render(c.a.createElement(j,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.7da3cc0e.chunk.js.map